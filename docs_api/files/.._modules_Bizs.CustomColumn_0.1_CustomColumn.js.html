<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>../modules/Bizs.CustomColumn/0.1/CustomColumn.js - open jquery components library</title>
    <link rel="stylesheet" href="../assets/css/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="../assets/css/widget.css">
    <link rel="stylesheet" href="../assets/css/tabview.css">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="../assets/js/yui-min.js"></script>
    <script src="../assets/js/comps1.js"></script>
    <script src="../assets/js/comps2.js"></script>
    <script src="../assets/js/comps3.js"></script>
    <script src="../assets/js/comps4.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../jc_logo.png" title="open jquery components library"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.2</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/JC.AjaxTree.html">JC.AjaxTree</a></li>
            
                <li><a href="../classes/JC.AjaxUpload.html">JC.AjaxUpload</a></li>
            
                <li><a href="../classes/JC.alert.html">JC.alert</a></li>
            
                <li><a href="../classes/JC.AutoChecked.html">JC.AutoChecked</a></li>
            
                <li><a href="../classes/JC.AutoComplete.html">JC.AutoComplete</a></li>
            
                <li><a href="../classes/JC.AutoFixed.html">JC.AutoFixed</a></li>
            
                <li><a href="../classes/JC.AutoSelect.html">JC.AutoSelect</a></li>
            
                <li><a href="../classes/JC.BaseMVC.html">JC.BaseMVC</a></li>
            
                <li><a href="../classes/JC.BaseMVC.Model.html">JC.BaseMVC.Model</a></li>
            
                <li><a href="../classes/JC.Calendar.html">JC.Calendar</a></li>
            
                <li><a href="../classes/JC.common.html">JC.common</a></li>
            
                <li><a href="../classes/JC.confirm.html">JC.confirm</a></li>
            
                <li><a href="../classes/JC.Cover.html">JC.Cover</a></li>
            
                <li><a href="../classes/JC.DCalendar.html">JC.DCalendar</a></li>
            
                <li><a href="../classes/JC.Dialog.html">JC.Dialog</a></li>
            
                <li><a href="../classes/JC.Dialog.alert.html">JC.Dialog.alert</a></li>
            
                <li><a href="../classes/JC.Dialog.confirm.html">JC.Dialog.confirm</a></li>
            
                <li><a href="../classes/JC.Dialog.mask.html">JC.Dialog.mask</a></li>
            
                <li><a href="../classes/JC.Dialog.msgbox.html">JC.Dialog.msgbox</a></li>
            
                <li><a href="../classes/JC.Drag.html">JC.Drag</a></li>
            
                <li><a href="../classes/JC.DragSelect.html">JC.DragSelect</a></li>
            
                <li><a href="../classes/JC.f.html">JC.f</a></li>
            
                <li><a href="../classes/JC.FChart.html">JC.FChart</a></li>
            
                <li><a href="../classes/JC.Fixed.html">JC.Fixed</a></li>
            
                <li><a href="../classes/JC.FlowChart.html">JC.FlowChart</a></li>
            
                <li><a href="../classes/JC.FormFillUrl.html">JC.FormFillUrl</a></li>
            
                <li><a href="../classes/JC.FrameUtil.html">JC.FrameUtil</a></li>
            
                <li><a href="../classes/JC.hideAllPanel.html">JC.hideAllPanel</a></li>
            
                <li><a href="../classes/JC.hideAllPopup.html">JC.hideAllPopup</a></li>
            
                <li><a href="../classes/JC.ImageCutter.html">JC.ImageCutter</a></li>
            
                <li><a href="../classes/JC.LunarCalendar.html">JC.LunarCalendar</a></li>
            
                <li><a href="../classes/JC.LunarCalendar.Model.html">JC.LunarCalendar.Model</a></li>
            
                <li><a href="../classes/JC.LunarCalendar.View.html">JC.LunarCalendar.View</a></li>
            
                <li><a href="../classes/JC.msgbox.html">JC.msgbox</a></li>
            
                <li><a href="../classes/JC.NSlider.html">JC.NSlider</a></li>
            
                <li><a href="../classes/JC.NumericStepper.html">JC.NumericStepper</a></li>
            
                <li><a href="../classes/JC.Paginator.html">JC.Paginator</a></li>
            
                <li><a href="../classes/JC.Panel.html">JC.Panel</a></li>
            
                <li><a href="../classes/JC.Panel.Model.html">JC.Panel.Model</a></li>
            
                <li><a href="../classes/JC.Panel.View.html">JC.Panel.View</a></li>
            
                <li><a href="../classes/JC.Placeholder.html">JC.Placeholder</a></li>
            
                <li><a href="../classes/JC.PopTips.html">JC.PopTips</a></li>
            
                <li><a href="../classes/JC.Rate.html">JC.Rate</a></li>
            
                <li><a href="../classes/JC.Scrollbar.html">JC.Scrollbar</a></li>
            
                <li><a href="../classes/JC.ServerSort.html">JC.ServerSort</a></li>
            
                <li><a href="../classes/JC.Slider.html">JC.Slider</a></li>
            
                <li><a href="../classes/JC.Slider.Model.html">JC.Slider.Model</a></li>
            
                <li><a href="../classes/JC.StepControl.html">JC.StepControl</a></li>
            
                <li><a href="../classes/JC.Suggest.html">JC.Suggest</a></li>
            
                <li><a href="../classes/JC.Tab.html">JC.Tab</a></li>
            
                <li><a href="../classes/JC.Tab.Model.html">JC.Tab.Model</a></li>
            
                <li><a href="../classes/JC.Tab.View.html">JC.Tab.View</a></li>
            
                <li><a href="../classes/JC.TableFreeze.html">JC.TableFreeze</a></li>
            
                <li><a href="../classes/JC.Tips.html">JC.Tips</a></li>
            
                <li><a href="../classes/JC.Tips.Model.html">JC.Tips.Model</a></li>
            
                <li><a href="../classes/JC.Tips.View.html">JC.Tips.View</a></li>
            
                <li><a href="../classes/JC.Tree.html">JC.Tree</a></li>
            
                <li><a href="../classes/JC.Tree.Model.html">JC.Tree.Model</a></li>
            
                <li><a href="../classes/JC.Valid.html">JC.Valid</a></li>
            
                <li><a href="../classes/window.Bizs.ActionLogic.html">window.Bizs.ActionLogic</a></li>
            
                <li><a href="../classes/window.Bizs.AutoSelectComplete.html">window.Bizs.AutoSelectComplete</a></li>
            
                <li><a href="../classes/window.Bizs.ChangeLogic.html">window.Bizs.ChangeLogic</a></li>
            
                <li><a href="../classes/window.Bizs.CommonModify.html">window.Bizs.CommonModify</a></li>
            
                <li><a href="../classes/window.Bizs.CRMSchedule.html">window.Bizs.CRMSchedule</a></li>
            
                <li><a href="../classes/window.Bizs.CustomColumn.html">window.Bizs.CustomColumn</a></li>
            
                <li><a href="../classes/window.Bizs.DisableLogic.html">window.Bizs.DisableLogic</a></li>
            
                <li><a href="../classes/window.Bizs.DMultiDate.html">window.Bizs.DMultiDate</a></li>
            
                <li><a href="../classes/window.Bizs.DropdownTree.html">window.Bizs.DropdownTree</a></li>
            
                <li><a href="../classes/window.Bizs.FormLogic.html">window.Bizs.FormLogic</a></li>
            
                <li><a href="../classes/window.Bizs.InputSelect.html">window.Bizs.InputSelect</a></li>
            
                <li><a href="../classes/window.Bizs.KillISPCache.html">window.Bizs.KillISPCache</a></li>
            
                <li><a href="../classes/window.Bizs.MoneyTips.html">window.Bizs.MoneyTips</a></li>
            
                <li><a href="../classes/window.Bizs.MultiAutoComplete.html">window.Bizs.MultiAutoComplete</a></li>
            
                <li><a href="../classes/window.Bizs.MultiChangeLogic.html">window.Bizs.MultiChangeLogic</a></li>
            
                <li><a href="../classes/window.Bizs.MultiDate.html">window.Bizs.MultiDate</a></li>
            
                <li><a href="../classes/window.Bizs.MultiSelect.html">window.Bizs.MultiSelect</a></li>
            
                <li><a href="../classes/window.Bizs.MultiselectPanel.html">window.Bizs.MultiselectPanel</a></li>
            
                <li><a href="../classes/window.Bizs.MultiSelectTree.html">window.Bizs.MultiSelectTree</a></li>
            
                <li><a href="../classes/window.Bizs.MultiUpload.html">window.Bizs.MultiUpload</a></li>
            
                <li><a href="../classes/window.Bizs.TaskViewer.html">window.Bizs.TaskViewer</a></li>
            
                <li><a href="../classes/window.jQuery.html">window.jQuery</a></li>
            
                <li><a href="../classes/window.jQuery.mousewheel.html">window.jQuery.mousewheel</a></li>
            
                <li><a href="../classes/window.JSON.html">window.JSON</a></li>
            
                <li><a href="../classes/window.Raphael.html">window.Raphael</a></li>
            
                <li><a href="../classes/window.requirejs.html">window.requirejs</a></li>
            
                <li><a href="../classes/window.swfobject.html">window.swfobject</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: ../modules/Bizs.CustomColumn/0.1/CustomColumn.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
;(function(define, _win) { &#x27;use strict&#x27;; define( &#x27;Bizs.CustomColumn&#x27;, [ &#x27;JC.Panel&#x27;, &#x27;JC.Valid&#x27;, &#x27;Bizs.FormLogic&#x27; ], function(){
 if( JC.use ){
     !JC.Panel &amp;&amp; JC.use( &#x27;JC.Panel&#x27; );
     !JC.Valid &amp;&amp; JC.use( &#x27;JC.Valid&#x27; );
     !Bizs.FormLogic &amp;&amp; JC.use( &#x27;Bizs.FormLogic&#x27; );
 }

/**
 * 组件用途简述
 *
 *  &lt;p&gt;&lt;b&gt;require&lt;/b&gt;:
 *      &lt;a href=&#x27;JC.Panel.html&#x27;&gt;JC.Panel&lt;/a&gt;
 *      , &lt;a href=&#x27;JC.Valid.html&#x27;&gt;JC.Valid&lt;/a&gt;
 *      , &lt;a href=&#x27;Bizs.FormLogic.html&#x27;&gt;Bizs.FormLogic&lt;/a&gt;
 *  &lt;/p&gt;
 *
 *  &lt;p&gt;&lt;a href=&#x27;https://github.com/openjavascript/jquerycomps&#x27; target=&#x27;_blank&#x27;&gt;JC Project Site&lt;/a&gt;
 *      | &lt;a href=&#x27;http://jc2.openjavascript.org/docs_api/classes/Bizs.CustomColumn.html&#x27; target=&#x27;_blank&#x27;&gt;API docs&lt;/a&gt;
 *      | &lt;a href=&#x27;../../modules/Bizs.CustomColumn/0.1/_demo&#x27; target=&#x27;_blank&#x27;&gt;demo link&lt;/a&gt;&lt;/p&gt;
 *  
 *  &lt;h2&gt;页面只要引用本脚本, 默认会自动处理 div class=&quot;js_bizCustomColumn&quot; &lt;/h2&gt;
 *
 *  &lt;h2&gt;可用的 HTML attribute&lt;/h2&gt;
 *
 *  &lt;dl&gt;
 *      &lt;dt&gt;[ data-url | data-query ] = url&lt;/dt&gt;
 *      &lt;dd&gt;提交数据的URL&lt;dd&gt;
 *
 *      &lt;dt&gt;data-data = json var name&lt;/dt&gt;
 *      &lt;dd&gt;自定义列的数据 变量名, &lt;b&gt;window 变量域&lt;/b&gt;&lt;/dd&gt;
 *
 *      &lt;dt&gt;data-scriptData = script selector&lt;/dt&gt;
 *      &lt;dd&gt;脚本数据&lt;/dd&gt;
 *
 *      &lt;dt&gt;data-id = string&lt;/dt&gt;
 *      &lt;dd&gt;{id}占位符的数值&lt;/dd&gt;
 *
 *      &lt;dt&gt;data-minCol = int&lt;/dt&gt;
 *      &lt;dd&gt;最小需要选择多少列&lt;/dd&gt;
 *
 *      &lt;dt&gt;data-maxCol = int&lt;/dt&gt;
 *      &lt;dd&gt;最多只能选择多少列&lt;/dd&gt;
 *
 *      &lt;dt&gt;data-name = string&lt;/dt&gt;
 *      &lt;dd&gt;数据复选框的 name&lt;/dd&gt;
 *
 *      &lt;dt&gt;data-saveSelector = selector&lt;/dt&gt;
 *      &lt;dd&gt;保存所要复选框值的选择器&lt;/dd&gt;
 *
 *      &lt;dt&gt;data-tpl = script tpl&lt;/dt&gt;
 *      &lt;dd&gt;显示弹框的脚本模板&lt;/dd&gt;
 *
 *      &lt;dt&gt;data-formDoneCallback = window function name&lt;/dt&gt;
 *      &lt;dd&gt;自定义提交数据后的响应函数&lt;/dd&gt;
 *
 *      &lt;dt&gt;data-formAfterProcessCallback = window function name&lt;/dt&gt;
 *      &lt;dd&gt;自定义表单提交前的校验函数&lt;/dd&gt;
 *  &lt;/dl&gt; 
 *
 * @namespace   window.Bizs
 * @class       CustomColumn
 * @extends     JC.BaseMVC
 * @constructor
 * @param   {selector|string}   _selector   
 * @version dev 0.1 2013-12-13
 * @author  qiushaowei &lt;suches@btbtd.org&gt; | 75 Team
 * @example
        &lt;h2&gt;Bizs.CustomColumn 示例&lt;/h2&gt;
 */
    var _jdoc = $( document ), _jwin = $( window );

    Bizs.CustomColumn = CustomColumn;

    function CustomColumn( _selector ){
        _selector &amp;&amp; ( _selector = $( _selector ) );

        if( JC.BaseMVC.getInstance( _selector, CustomColumn ) ) 
            return JC.BaseMVC.getInstance( _selector, CustomColumn );

        JC.BaseMVC.getInstance( _selector, CustomColumn, this );

        this._model = new CustomColumn.Model( _selector );
        this._view = new CustomColumn.View( this._model );

        this._init();

        JC.log( CustomColumn.Model._instanceName, &#x27;all inited&#x27;, new Date().getTime() );
    }
    /**
     * 初始化可识别的 CustomColumn 实例
     * @method  init
     * @param   {selector}      _selector
     * @static
     * @return  {Array of CustomColumnInstance}
     */
    CustomColumn.init =
        function( _selector ){
            var _r = [];
            _selector = $( _selector || document );

            if( _selector.length ){
                if( _selector.hasClass( &#x27;js_bizCustomColumn&#x27; )  ){
                    _r.push( new CustomColumn( _selector ) );
                }else{
                    _selector.find( &#x27;a.js_bizCustomColumn, button.js_bizCustomColumn&#x27; ).each( function(){
                        _r.push( new CustomColumn( this ) );
                    });
                }
            }
            return _r;
        };

    CustomColumn.ID_COUNT = 1;

    window.BizsCustomColumnFormDoneCallback =
        function( _json, _submitButton, _ins ){
               var _form = $(this), _panel;
               if( _json.errorno ){
                   _panel = JC.alert( _json.errmsg || &#x27;操作失败, 请重新尝试!&#x27;, _submitButton, 1 );
               }else{
                   _panel = JC.msgbox( _json.errmsg || &#x27;操作成功&#x27;, _submitButton, 0, function(){
                       JC.f.reloadPage( _ins._model.formAjaxDoneAction() || JC.f.urlDetect( &#x27;URL&#x27; ) );
                   });
               }
        };

    window.BizsCustomColumnFormAfterProcessCallback =
        function formAfterProcess( _evt, _ins ){
           var _form = $(this)
               , _panel = JC.f.parentSelector( _form, &#x27;div.UPanel&#x27; )
               , _cc
               ;
           if( !_panel ) return;
           _panel = JC.Panel.getInstance( _panel );
           if( !_panel ) return;
           _cc = _panel.CustomColumnIns;
           if( !_cc ) return;

           var _saveSelector = _cc._model.saveSelector(), _tmp, _selected;
           if( _saveSelector &amp;&amp; _saveSelector.length ){
               _tmp = [];
               _selected = _panel.selector().find( &#x27;input.js_typeItem:checked&#x27; );

               _cc.trigger( &#x27;update_selected_status&#x27; );

               if( _selected.length &lt; _cc._model.minCol() ){
                   return false;
               }

               if( _selected.length &gt; _cc._model.maxCol() ){
                   return false;
               }
               
               _selected.each( function(){
                   _tmp.push( $( this ).val().trim() );
               });
               _saveSelector.val( _tmp.join(&#x27;,&#x27;) );
           }
        };

    JC.BaseMVC.build( CustomColumn );

    JC.f.extendObject( CustomColumn.prototype, {
        _beforeInit:
            function(){
                JC.log( &#x27;CustomColumn _beforeInit&#x27;, new Date().getTime() );
            }

        , _initHanlderEvent:
            function(){
                var _p = this;

                _p.on( &#x27;inited&#x27;, function(){
                });

                _p.on( &#x27;showPopup&#x27;, function(){
                    _p._view.showPopup();
                });

                _p.on( &#x27;hidePopup&#x27;, function(){
                    _p.view.hidePopup();
                });

                _p.on( &#x27;panel_inited&#x27;, function( _evt, _panel ){
                    _p._model.currentPanel( _panel );
                    _panel.CustomColumnIns = _p;
                });

                _p.on( &#x27;update_default&#x27;, function( _evt, _panel ){
                    _panel.selector().find( &#x27;input.js_typeItem&#x27; ).each( function(){
                        var _sp = $( this )
                            , _dataItem = _p._model.data()[ _sp.attr( &#x27;data-topIndex&#x27; ) ].content[ _sp.attr( &#x27;data-subIndex&#x27; ) ]
                            ;
                        if( _dataItem.isdefault ){
                            _sp.prop( &#x27;checked&#x27;, true );
                        }else{
                            _sp.prop( &#x27;checked&#x27;, false );
                        }
                    });
                });

                _p.on( &#x27;update_custom&#x27;, function( _evt, _panel ){
                    _panel.selector().find( &#x27;input.js_typeItem&#x27; ).each( function(){
                        var _sp = $( this )
                            , _dataItem = _p._model.data()[ _sp.attr( &#x27;data-topIndex&#x27; ) ].content[ _sp.attr( &#x27;data-subIndex&#x27; ) ]
                            ;
                        if( _dataItem.ison ){
                            _sp.prop( &#x27;checked&#x27;, true );
                        }else{
                            _sp.prop( &#x27;checked&#x27;, false );
                        }
                    });
                });

                _p.on( &#x27;update_selected_status&#x27;, function(){
                        var _panel = _p._model.currentPanel(), _selected, _em = _panel.find( &#x27;em.js_bccErrEm&#x27; );
                       _selected = _panel.selector().find( &#x27;input.js_typeItem:checked&#x27; );

                       if( _selected.length &lt; _p._model.minCol() ){
                           _em.html( &#x27;请选择数据列, 最少需要选择&#x27; + _p._model.minCol() + &#x27;个数据列！&#x27; ).show();
                           return;
                       }

                       if( _selected.length &gt; _p._model.maxCol() ){
                           _em.html( &#x27;最多只能选择&#x27; + _p._model.maxCol() + &#x27;个数据列！&#x27; ).show();
                           return;
                       }
                       _em.hide();
                });
            }

        , _inited:
            function(){
                JC.log( &#x27;CustomColumn _inited&#x27;, new Date().getTime() );
                this.trigger( &#x27;inited&#x27; );
            }

        , show: function(){ this.trigger( &#x27;showPopup&#x27; ); }
        , hide: function(){ this.trigger( &#x27;hidePopup&#x27; ); }
        , close: function(){ this.trigger( &#x27;hidePopup&#x27; ); }
    });

    CustomColumn.Model._instanceName = &#x27;JCCustomColumn&#x27;;
    JC.f.extendObject( CustomColumn.Model.prototype, {
        init:
            function(){
                JC.log( &#x27;CustomColumn.Model.init:&#x27;, new Date().getTime() );
                this._gid = &#x27;CustomColumnIns_&#x27; + CustomColumn.ID_COUNT;
                CustomColumn.ID_COUNT++;
            }

        , currentPanel:
            function( _setter ){
                typeof _setter != &#x27;undefined&#x27; &amp;&amp; ( this._currentPanel = _setter );
                return this._currentPanel;
            }

        , gid: function(){ return this._gid; }

        , url:
            function(){
                var _r = this.attrProp( &#x27;data-query&#x27;) || this.attrProp( &#x27;data-url&#x27; ) || &#x27;?&#x27;;
                return _r;
            }

        , id:
            function(){
                var _r = this.attrProp( &#x27;pagename&#x27;) || this.attrProp( &#x27;data-id&#x27; ) || &#x27;&#x27;;
                return _r;
            }

        , name:
            function(){
                var _r = this.attrProp( &#x27;data-name&#x27; ) || &#x27;selectedItem&#x27;;
                return _r;
            }

        , data:
            function(){
                if( !this._data ){
                    this.is( &#x27;[data-data]&#x27; ) &amp;&amp; ( this._data = this.windowProp( &#x27;data-data&#x27; ) );
                    this.is( &#x27;[data-scriptData]&#x27; ) &amp;&amp; ( this._data = this.scriptDataProp( &#x27;data-scriptData&#x27; ) );
                }
                return this._data;
            }

        , typeSelector:
            function(){
                return this.attrProp( &#x27;data-typeSelector&#x27; ) || &#x27;js_selectType&#x27;;
            }

        , saveSelector:
            function(){
                if( this.is( &#x27;[data-saveSelector]&#x27; ) ){
                    return this.selectorProp( &#x27;data-saveSelector&#x27; ) ;
                }else{
                    return this.selector().find( &#x27;input.js_saveSelector&#x27; );
                }
            }

        , maxCol: 
            function(){
                return this.intProp( &#x27;data-maxCol&#x27; ) || 20;
            }

        , minCol: 
            function(){
                return this.intProp( &#x27;data-minCol&#x27; ) || 1;
            }

        , tpl:
            function(){
                if( !this._tpl ){
                    this.is( &#x27;[data-tpl]&#x27; ) &amp;&amp; ( this._tpl = this.scriptTplProp( &#x27;data-tpl&#x27; ) );
                }
                return this._tpl;
            }

        , formDoneCallback:
            function(){
                var _r = &#x27;BizsCustomColumnFormDoneCallback&#x27;;
                this.attrProp( &#x27;data-formDoneCallback&#x27; ) 
                    &amp;&amp; this.windowProp( &#x27;data-formDoneCallback&#x27; ) 
                    &amp;&amp; ( _r = this.attrProp( &#x27;data-formDoneCallback&#x27; ) );
                return _r;
            }

        , formAfterProcessCallback:
            function(){
                var _r = &#x27;BizsCustomColumnFormAfterProcessCallback&#x27;;
                this.attrProp( &#x27;data-formAfterProcessCallback&#x27; ) 
                    &amp;&amp; this.windowProp( &#x27;data-formAfterProcessCallback&#x27; ) 
                    &amp;&amp; ( _r = this.attrProp( &#x27;data-formAfterProcessCallback&#x27; ) );
                return _r;
            }

        , isDefault:
            function(){
                var _r = true, _p = this;
                $.each( _p.data(), function( _k, _item ){
                    $.each( _item.content, function( _sk, _sitem ){
                        if( ( _sitem.ison &amp;&amp; !_sitem.isdefault ) || ( !( _sitem.ison || _sitem.dftchk ) &amp;&amp; _sitem.isdefault ) ){
                            return _r = false;
                        }
                    });
                    if( !_r ) return false;
                });
                return _r;
            }
    });

    JC.f.extendObject( CustomColumn.View.prototype, {
        init:
            function(){
                JC.log( &#x27;CustomColumn.View.init:&#x27;, new Date().getTime() );
            }

        , showPopup:
            function(){
                var _p = this
                    , _tpl = _p._model.tpl()
                    , _panel
                    , _columns = []
                    , _isDefault = _p._model.isDefault()
                    ;

                $.each( _p._model.data(), function( _k, _item ){
                    _columns.push( &#x27;&lt;dl&gt;&#x27; );
                    _columns.push( &#x27;&lt;dt&gt;&#x27; );
                    _item.name &amp;&amp; ( _columns.push( _item.groupName  ) );
                    _columns.push( &#x27;&lt;/dt&gt;&#x27; );
                    _columns.push( &#x27;&lt;dd&gt;&#x27; );

                    if( _item.content ){
                        _columns.push( &#x27;&lt;ul&gt;&#x27; );
                        $.each( _item.content, function( _sk, _sitem ){

                            if( !_sitem ){
                                return;
                            }

                            var _isChecked = &#x27;&#x27;, _dftchk = &#x27;&#x27;, _class = &#x27;&#x27;;

                            _sitem.isdefault &amp;&amp; ( _class = &#x27;js_isDefaultItem&#x27; );

                            if( _isDefault ){
                                _sitem.isdefault &amp;&amp; ( _isChecked = &#x27; checked=&quot;checked&quot; &#x27; );
                            }else{
                                _sitem.ison &amp;&amp; ( _isChecked = &#x27; checked=&quot;checked&quot; &#x27; );
                            }

                            if( _sitem.isdefault &amp;&amp; _sitem.dftchk ) {
                                ( _isChecked += &#x27; disabled=&quot;disabled&quot; &#x27; );
                                _dftchk = &#x27;&lt;input name=&quot;{3}&quot; value=&quot;{1}&quot; type=&quot;hidden&quot; class=&quot;&quot;&gt;&#x27;;
                            }

                            _columns.push( JC.f.printf( &#x27;&lt;li&gt;&lt;label&gt;&lt;input name=&quot;{3}&quot; value=&quot;{1}&quot; &#x27;
                                + &#x27; &#x27;
                                + &#x27; type=&quot;checkbox&quot; data-topIndex=&quot;{6}&quot; data-subIndex=&quot;{7}&quot; class=&quot;js_typeItem {5}&quot; {4}&gt;&amp;nbsp;{2}{0}&lt;/label&gt;&lt;/li&gt;&#x27;
                                , _dftchk
                                , _sitem.name, _sitem.title
                                , _p._model.name()
                                , _isChecked
                                , _class
                                , _k, _sk
                            ));
                        });
                        _columns.push( &#x27;&lt;/ul&gt;&#x27; );
                    }

                    _columns.push( &#x27;&lt;/dd&gt;&#x27; );
                    _columns.push( &#x27;&lt;/dl&gt;&#x27; );
                });

                _tpl = JC.f.printKey( _tpl, { 
                    id: _p._model.id()
                    , url: _p._model.url()
                    , content: _columns.join( &#x27;&#x27; )
                    , formDoneCallback: _p._model.formDoneCallback()
                    , formAfterProcessCallback: _p._model.formAfterProcessCallback()
                } );

                _panel = JC.Dialog( _tpl );
                _p.trigger( &#x27;panel_inited&#x27;, [ _panel ] );

                if( _isDefault ){
                    _panel.find( &#x27;input.js_defaultType&#x27; ).prop( &#x27;checked&#x27;, true );
                }else{
                    _panel.find( &#x27;input.js_customType&#x27; ).prop( &#x27;checked&#x27;, true );
                }

                _panel.find( &#x27;input.js_customType&#x27; ).on( &#x27;click&#x27;, function( _sevt ){
                    if( _p._model.isDefault() ){
                        return false;
                    }
                    _p.trigger( &#x27;update_custom&#x27;, [ _panel ] );
                    _p.trigger( &#x27;update_selected_status&#x27; );
                });

                _panel.selector().delegate( &#x27;input.js_selectType&#x27;, &#x27;change&#x27;, function(){
                    var _sp = $( this );
                    if( _sp.val() != &#x27;default&#x27; ) return;
                    _p.trigger( &#x27;update_default&#x27;, [ _panel ] );
                    _p.trigger( &#x27;update_selected_status&#x27; );
                });

                _panel.selector().delegate( &#x27;input.js_typeItem&#x27;, &#x27;change&#x27;, function(){
                    var _sp = $( this )
                        , _dataItem = _p._model.data()[ _sp.attr( &#x27;data-topIndex&#x27; ) ].content[ _sp.attr( &#x27;data-subIndex&#x27; ) ]
                        ;
                    if( _sp.prop( &#x27;checked&#x27; ) ){
                        _dataItem.ison = true;
                    }else{
                        _dataItem.ison = false;
                    }

                    if( _p._model.isDefault() ){
                        _panel.find( &#x27;input.js_defaultType&#x27; ).prop( &#x27;checked&#x27;, true );
                    }else{
                        _panel.find( &#x27;input.js_customType&#x27; ).prop( &#x27;checked&#x27;, true );
                    }

                    _p.trigger( &#x27;update_selected_status&#x27; );
                });

                
            }
    });

    _jdoc.ready( function(){
        /*
        JC.f.safeTimeout( function(){
            CustomColumn.autoInit &amp;&amp; CustomColumn.init();
        }, null, &#x27;CustomColumnasdfae&#x27;, 1 );
        */

        $( document ).delegate( &#x27;button.js_bizCustomColumn, a.js_bizCustomColumn&#x27;, &#x27;click&#x27;, function(){
            var _p = $( this ), _ins = JC.BaseMVC.getInstance( _p, CustomColumn );
            if( !_ins ){
                _ins = new CustomColumn( _p );
            }
            _ins &amp;&amp; _ins.show();
        });
    });

    return Bizs.CustomColumn;
});}( typeof define === &#x27;function&#x27; &amp;&amp; define.amd ? define : 
        function ( _name, _require, _cb ) { 
            typeof _name == &#x27;function&#x27; &amp;&amp; ( _cb = _name );
            typeof _require == &#x27;function&#x27; &amp;&amp; ( _cb = _require ); 
            _cb &amp;&amp; _cb(); 
        }
        , window
    )
);

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
