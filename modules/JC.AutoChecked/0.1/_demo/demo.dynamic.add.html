<!doctype html>
<html>
    <head>
        <meta charset=utf-8 />
        <title>360 75 team</title>
        <style type='text/css'>
            body{
                width: 600px;
                margin: 20px auto 20px;
            }

            dl.def > dd{
                margin: 10px 0;
            }
        </style>
        <script src="../../../../lib.js"></script>
        <script src="../../../../config.js"></script>
        <script>
            JC.debug = true; 
            requirejs( [ 'JC.AutoChecked', 'Bizs.ActionLogic' ], function( AutoChecked ){
			});

            $(document).delegate( 'button.js_ajaxTest', 'click', function(){
                var _p = $(this);
                Bizs.ActionLogic && Bizs.ActionLogic.disableButton( _p );

                $.get( './data/initCheckAll.php?rnd='+new Date().getTime(), function( _r ){
                    var _selector = $(_r);
                    $( $( 'body' ).children().first() ).before( _selector );
                    JC.AutoChecked( _selector );
                });
            });

            window.ITEM_COUNT = 10;

            $(document).delegate( 'button.js_dynAdd', 'click', function( _evt ){
                var _p = $(this)
                    , _quantity = parseInt( _p.attr('daquantity'), 10 ) || 1
                    , _dabox = JC.f.parentSelector( _p, _p.attr('dabox') )
                    , _daboxitem = JC.f.parentSelector( _p, _p.attr('daboxitem') )
                    , _ix = ITEM_COUNT
                    , _tpl = JC.f.scriptContent( '#itemTpl' )
                    , _ls = []
                    ;

                if( !( _quantity && _dabox && _dabox.length ) ) return;

                for( var i = 0; i < _quantity; i++ ){
                    _ls.push( JC.f.printf( _tpl, _ix++ ) );
                }

                var _new = $( _ls.join('') );
                _new.appendTo( _daboxitem );

                JC.AutoChecked( _dabox );
            });

        </script>
    </head>    
    <body>

        <div style="position:fixed; top: 20px; right: 20px">
            <button type="button" class="js_ajaxTest">ajax test</button>
        </div>
        <!--
        <div style="position:fixed; top: 50px; right: 20px">
            <button type="button" class="js_autoinit">auto init test</button>
        </div>
        -->
        <dl class="def">
            <dt>checkall example 1</dt>
            <dd>
                <label>
                    <input type="checkbox" 
                    checktype="all" 
                    checkfor="///input[type=checkbox]"
                    /> 
                    全选
                </label>
                <label>
                    <input type="checkbox" 
                    checktype="inverse" 
                    checkfor="<dl input[type=checkbox]" 
                    checkall="<dl input[checktype=all]"
                    />
                    反选
                </label>
                <button type="button" 
                    class="js_dynAdd" 
                    daquantity="1" 
                    dabox="<dl" 
                    daboxitem="<dl > dd:last" 
                    >add 1</label>
                <button type="button" 
                    class="js_dynAdd" 
                    daquantity="4" 
                    dabox="<dl" 
                    daboxitem="<dl > dd:last" 
                    >add 4</label>
                <button type="button" 
                    class="js_dynAdd" 
                    daquantity="5" 
                    dabox="<dl" 
                    daboxitem="<dl > dd:last" 
                    >add 5</label>
            </dd>
            <dd>
                <label >
                    <input type='checkbox' value='' name='' checked />
                    checkall1_1
                </label>
                <label >
                    <input type='checkbox' value='' name='' checked />
                    checkall1_2
                </label>
                <label >
                    <input type='checkbox'value='' name='' checked />
                    checkall1_3
                </label>
                <label >
                    <input type='checkbox' value='' name='' checked />
                    checkall1_4
                </label>
                <label >
                    <input type='checkbox' value='' name='' checked />
                    checkall1_5
                </label>
            </dd>
        </dl>
        <hr />
        <dl class="def example2">
            <dt>checkall example 2</dt>
            <dd>
                <label>
                    <input type="checkbox" 
                    checktype="all" 
                    checkfor="dl.example2 input[type=checkbox]"
                    />
                    全选
                </label>
                <label>
                    <input type="checkbox" 
                    checktype="inverse" 
                    checkfor="dl.example2 input[type=checkbox]" 
                    checkall="dl.example2 input[checktype=all]"
                    />
                    反选
                </label>
            </dd>
            <dd>
                <label>
                    <input type='checkbox' value='' name='' checked />
                    checkall2_1
                </label>
                <label>
                    <input type='checkbox' value='' name='' checked />
                    checkall2_2
                </label>
                <label>
                    <input type='checkbox' value='' name='' checked />
                    checkall2_3
                </label>
                <label>
                    <input type='checkbox' value='' name='' checked />
                    checkall2_4
                </label>
                <label>
                    <input type='checkbox' value='' name='' checked />
                    checkall2_5
                </label>
            </dd>
        </dl>
        <hr />
        <dl class="def example3">
            <dt>checkall example 3</dt>
            <dd>
                <label>
                    <input type="checkbox" checked 
                    checktype="all" 
                    checkfor="<dl input[type=checkbox]"
                    />
                    全选
                </label>
                <label>
                    <input type="checkbox" 
                    checktype="inverse" 
                    checkfor="<dl input[type=checkbox]" 
                    checkall="<dl input[checktype=all]"
                    />
                    反选
                </label>
            </dd>
            <dd>
                <label>
                    <input type='checkbox' value='' name='' />
                    checkall3_1
                </label>
                <label >
                    <input type='checkbox' value='' name='' checked />
                    checkall3_2
                </label>
                <label>
                    <input type='checkbox' value='' name='' />
                    checkall3_3
                </label>
                <label>
                    <input type='checkbox' value='' name='' checked />
                    checkall3_4
                </label>
                <label>
                    <input type='checkbox' value='' name='' />
                    checkall3_5
                </label>
            </dd>
        </dl>

        <script type='text/template' id="itemTpl" >
            <label >
                <input type='checkbox' value='{0}' name='test_{0}' />
                name_{0}
            </label>
        </script>
    </body>
</html>

