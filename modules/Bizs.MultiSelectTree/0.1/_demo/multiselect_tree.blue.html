<!doctype html>
<html>
<head>
<meta charset=utf-8 />
<title>360 75 team</title>
<style>
    body{ width: 680px; margin: 20px auto; }
</style>
<link href='../../../../modules/JC.Tree/0.1/res/blue/style.css' rel='stylesheet' />
<script src="../../../../lib.js"></script>
<script src="../../../../config.js"></script>
<script>
    JC.debug = 1;

    requirejs( [ 'Bizs.MultiSelectTree' ], function(){
        var treeData = {
            data: {"23":[["28","\u9500\u552e\u4e8c\u7ec4"],["24","\u552e\u524d\u5ba1\u6838\u7ec4"]],
				   "24":[["25","\u4e8c\u7ec4\u4e00\u961f"],["26","\u4e8c\u7ec4\u4e8c\u961f"],["27","\u4e8c\u7ec4\u4e09\u961f"]],
				   "28":[["29","\u4e8c\u7ec4\u4e00\u961f"],["30","\u4e8c\u7ec4\u4e8c\u961f"],["31","\u4e8c\u7ec4\u4e09\u961f"]]
				  },
		    root: ["23",'客户发展部']
		};
		var _tree_element = $('#tree_box');
		
		
       var _mst = new Bizs.MultiSelectTree(_tree_element , treeData, getSelected );
           _mst.init();
		
		var leafData = {
			"25" : [["123","A"],["124","B"]],
			"26" : [["125","C"],["126","D"]],
			"27" : [["127","E"],["128","F"]],
			"29" : [["129","G"],["130","H"]],
			"30" : [["131","I"],["132","J"]],
			"31" : [["133","K"],["134","L"]]
		};
		function getSelected(selectedArray, _tree){
			var html = '';
			var parent;
			for(var i=0;i<selectedArray.length;i++){
				var key = selectedArray[i];
				if(!_tree._model.hasChild(key)){
					parent = _tree.getItem(key).attr('dataname');
				}
				var leaf = leafData[key];
				if(leaf){
					for(var j=0;j<leaf.length;j++){
						html += JC.f.printf('<div>({2}){0}-{1}</div>',leaf[j][0],leaf[j][1],parent);
					}
					parent = '';
				}
			}
			$('#dvSel').html(html);
		}	
    });

</script>
</head>    
<body>
    <dl>
        <dt>MultiSelectTree 示例</dt>
        <dd>
            <div id="tree_box" class="tree_container"></div>
        </dd>
    </dl>
	<div id="dvSel">
	
	</div>
</body>
</html>

