<!doctype html>
<html>
<head>
<meta charset=utf-8 />
<title>Open JQuery Components Library - suches</title>
    <style>
        body{
            margin: 20px 40px;
        }

        .defDl > dd{
            border-bottom:1px solid #e2e3ea; 
        }

    </style>
    <script src="../../../../../lib.js"></script>
    <script src="../../../../../config.js"></script>
    <script>
        JC.debug = true;

        requirejs( [ 'JC.FChart' ], function(){
        });
    </script>
</head>    
<body>
    <h2>JC.FChart - mix chart 示例</h2>

    <div class="js_jchartTest"></div>

    <dl class="defDl">
        <dt></dt>
        <dd>
            <div class="legend-update">
                屏蔽 ： 
                <label><input type="checkbox" data-index="0" checked="checked" />MG名爵</label>
                <label><input type="checkbox" data-index="1" checked="checked" />MG名爵1</label>
                <label><input type="checkbox" data-index="2" checked="checked" />北汽</label>
                <label><input type="checkbox" data-index="3" checked="checked" />北汽1</label>
            </div>
            <div class="js_compFChart"
                chartScriptData="|script"
                chartWidth="600"
                chartHeight="400"
                >
                <script type="text/template">
				{
					"chart": {
						"type": "mix"
					}
					, "title": {
						"text": "日趋势"
					}
					, "subtitle": {
						"text": "日趋势 subtitle"
					}
					, "xAxis": {
						"categories": [
							"2014-11-17",
							"2014-11-18",
							"2014-11-19",
							"2014-11-20",
							"2014-11-21"
						]
						, "displayAll": {
							"enabled": true
						}
					},
					"yAxis": [
						{
							"title": {
								"text": "test vtitle"
								, "enabled": 1
							}
						}
						, {
							"autoRate": {
								"enabled": true
							}
							, "title": {
								"text": "test vtitle 1"
								, "enabled": 1
							}
						}
						, {
							opposite: true
							, "title": {
								"text": "test vtitle 2"
								, "enabled": 1
							}
						}
						, {
							opposite: true
							, "autoRate": {
								"enabled": true
								, "rateUp": 0
								, "maxOffset": .1
								, "minOffset": .1
							}
							, "title": {
								"text": "test vtitle 3"
								, "enabled": 1
							}
						}
					],
					"animation": {
						"enabled": true
					},
					"series": [
						{
							"type": "bar",
							"name": "MG名爵",
							"yAxis": 0,
							"data": [
								4039,
								2828,
								1567,
								5531,
								3544
							],
							"style": {
								"stroke": "#ff7100"
							},
							"pointStyle": {}
						}
						, {
							"type": "bar",
							"name": "MG名爵1",
							"yAxis": 1,
							"data": [
								5039,
								3828,
								2567,
								6531,
								4544
							],
							"style": {
								"stroke": "#ff7100"
							},
							"pointStyle": {}
						}
						, {
							"type": "line",
							"name": "北汽",
							"yAxis": 2,
							"data": [
								81018,
								80207,
								84018,
								85313,
								84018
							],
							"style": {
								"stroke": "#ff7100"
							},
							"pointStyle": {}
						}						, {
							"type": "line",
							"name": "北汽1",
							"yAxis": 3,
							"data": [
								34018,
								41018,
								40207,
								34018,
								25313
							],
							"style": {
								"stroke": "#ff7100"
							},
							"pointStyle": {}
						}
					],
					"legend": {
						"enabled": true
						, "direction": "TOP_RIGHT"
						, "margin": { "bottom": 0, "y": -5 }
					},
					"plotOptions": {
						/*
						"area": {
						"fillColor": {}
						}
						*/
					},
					/*
					"colors": [
					"0xbb9b3e",
					"0x4673c0"
					],
					*/
					"callback": {
						"initedCallback": "initedCallback"
					}
				}
                </script>
            </div>
        </dd>
    </dl>
    <script type="text/javascript">
        $( document ).on( 'change', '.legend-update input', function( e ){
            var _tar = $( e.target );
            var _wrap = _tar.closest( 'dl' );
            var _checkboxs = _wrap.find( '.legend-update input' );
            var _swf = _wrap.find( 'object' )[ 0 ];
            var _dataIndex;
            var _tmpItem;
            var _legend = {};

            $.each( _checkboxs, function( _i, _item ){
                _tmpItem = $( _item );
                if( !_tmpItem.is( ':checked' ) ) {/* 传入的是需要隐藏的index */
                    _dataIndex = _tmpItem.attr( 'data-index' )
                    _legend[ _dataIndex ] = _dataIndex;
                }
            } );

            _swf.legendUpdate( _legend );
        } );
    </script>
</body>
</html>


