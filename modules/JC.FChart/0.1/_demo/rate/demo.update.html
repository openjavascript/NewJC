<!doctype html>
<html>
<head>
<meta charset=utf-8 />
<title>Open JQuery Components Library - suches</title>
    <style>
        body{
            margin: 20px 40px;
        }

        .defDl > dd{
            border-bottom:1px solid #e2e3ea; 
        }

        table {
            width: 100%
        }

        table .updatediv {
            margin-top: 20px;
            padding-left: 20px;
            float: left;
            width: 45%;
        }

        .updatediv h2 {
            height: 30px;
            line-height: 30px;
        }

        .updatediv button {
            margin-left: 10px;
        }

        table textarea {
            height: 300px;
            width: 500px;
        }

    </style>
    
</head>    
<body>
    <h2>JC.FChart - rate chart 示例</h2>

    <div class="js_jchartTest"></div>

    <dl class="defDl">
        <dd>
            <div class="js_compFChart"
                chartScriptData="/script"
                chartHeight="400"
                >
                <script type="text/template">
                    {
                        chart: {
                            type: 'rate' 
                        }, 
                        title: {
                            text:'浏览器使用份额'
                        },
                        subtitle: {
                            text: 'for PC'
                        }, 
                        series:[{
                            name: 'Browser share',
                            data: [
                                {
                                    name: 'Firefox'
                                    ,  y: 50.01
                                    , style: { size: 40 }
                                    , borderBgColor: 0xECECEC
                                    , borderBgFillColor: 0xffffff
                                    , dataBorderBgColor: 0xFEB556
                                    , dataBorderBgFillColor: 0xFDF0F2
                                }
                            ]
                        }]
                        , radius: {
                            borderWidth: 20
                        }
                        , yAxis: {
                            maxvalue: 100
                        }
                        
                        , dataLabels: {
                            enabled: true
                            , format: '{0}%'
                        }

                        , tooltip: {
                            enabled: true
                            , pointFormat: '{0}%'
                        }
                    }
                </script>
            </div>
        </dd>
    </dl>
    <table>
        <tr>
            <td>
                <div class="updatediv">
                    <h2>
                        Rate data Update
                        <button type="button" class="js_updateChart">update</button>
                    </h2>
                    <textarea>
    {
        "chart": {
            "type": "rate"
        }, 
        "title": {
            "text": "浏览器使用份额"
        }, 
        "subtitle": {
            "text": "for PC"
        }, 
        "series": [
            {
                "name": "Browser share", 
                "data": [
                    [
                        "Firefox", 
                        200
                    ]
                ]
            }
        ], 
        "yAxis": {
            "maxvalue": 1000
        }, 
        "offsetAngle": 0, 
        "plotOptions": {
            "rate": {
                "dataLabels": {
                    "enabled": false
                }
            }
        }, 
        "legend": {
            "enabled": false
        }
    }
                    </textarea>
                    
                </div>
            </td>
        </tr>
    </table>

    <script src="../../../../../lib.js"></script>
    <script src="../../../../../config.js"></script>
    <script>
        JC.debug = true;

        requirejs( [ 'JC.FChart' ], function(){

            $( document ).delegate( 'button.js_updateChart', 'click', function( _evt ){

                var _data = $( _evt.target ).closest( 'div' ).find( 'textarea' ).val().trim();

                $( '.js_compFChart object' )[ 0 ].update( $.parseJSON( _data ) );

            } );
        } );
    </script>
</body>
</html>


