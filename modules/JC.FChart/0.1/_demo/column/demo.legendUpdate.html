<!doctype html>
<html>
<head>
<meta charset=utf-8 />
<title>Open JQuery Components Library - suches</title>
    <style>
        body{
            margin: 20px 40px;
        }

        .defDl > dd{
            border-bottom:1px solid #e2e3ea; 
        }

    </style>
    <script src="../../../../../lib.js"></script>
    <script src="../../../../../config.js"></script>
    <script>
        JC.debug = true;

        requirejs( [ 'JC.FChart' ], function(){
        });
    </script>
</head>    
<body>
    <h2>JC.FChart - column chart 示例</h2>

    <div class="js_jchartTest"></div>

    <dl class="defDl">
        <dt></dt>
        <dd>
            <div class="legend-update">
                屏蔽 ： 
                <label><input type="checkbox" data-index="0" checked="checked" />iphone</label>
                <label><input type="checkbox" data-index="1" checked="checked" />samsung</label>
                <label><input type="checkbox" data-index="2" checked="checked" />huawei</label>
                <label><input type="checkbox" data-index="3" checked="checked" />mi</label>
                <label><input type="checkbox" data-index="4" checked="checked" />meizu</label>
            </div>
            <div class="js_compFChart"
                chartScriptData="|script"
                chartWidth="600"
                chartHeight="300"
                >
                <script type="text/template">
                    {
                        chart: {
                            type: 'column' 
                        }, 
                        title: {
                            text:'Chart Title'
                        },
                        subtitle: {
                            text: 'sub title'
                        }, 
                        xAxis: {
                            categories: [ "iphone", "samsung", "huawei", "mi", "meizu" ] 
                        }, 
                        yAxis: {
                            title: {
                                text: '(Vertical Title - 中文)'
                            }
                            , format: '{0}'
                        },
                        tooltip: {                  
                            "pointFormat": "{0}",
                            "headerFormat": "{0}"
                        },
                        series:[{
                            name: 'Phone'
                            , data: [ 27000, 23600, 16200, 14100, 8400 ]
                            , format: '{0}台 占{1}%'
                        }, {
                            name: 'Computer',
                            data: [19170, 32060, 13600, 7000, 14800 ]
                            , format: '{0}台 约占{1}%'
                        }],
                        credits: {
                            enabled: true
                            , text: 'fchart.openjavascript.org'
                            , href: 'http://fchart.openjavascript.org/'
                        },
                        displayAllLabel: true,
                        legend: {
                            enabled: true
                        },
                        animation: {
                            enabled: true
                            , duration: .75
                        }
                    }
                </script>
            </div>
        </dd>
    </dl>
    <script type="text/javascript">
        $( document ).on( 'change', '.legend-update input', function( e ){
            var _tar = $( e.target );
            var _wrap = _tar.closest( 'dl' );
            var _checkboxs = _wrap.find( '.legend-update input' );
            var _swf = _wrap.find( 'object' )[ 0 ];
            var _dataIndex;
            var _tmpItem;
            var _legend = {};

            $.each( _checkboxs, function( _i, _item ){
                _tmpItem = $( _item );
                if( !_tmpItem.is( ':checked' ) ) {/* 传入的是需要隐藏的index */
                    _dataIndex = _tmpItem.attr( 'data-index' )
                    _legend[ _dataIndex ] = _dataIndex;
                }
            } );

            _swf.legendUpdate( _legend );
        } );
    </script>

</body>
</html>


