(function(e,t){e("JC.Cover",["JC.BaseMVC"],function(){function n(e){e&&(e=$(e));if(JC.BaseMVC.getInstance(e,n))return JC.BaseMVC.getInstance(e,n);JC.BaseMVC.getInstance(e,n,this),this._model=new n.Model(e),this._view=new n.View(this._model),this._init()}var e=$(document),t=$(window);JC.Cover=n,n.init=function(e){var t=[];return e=$(e||document),e.length&&(e.hasClass("js_compCover")?t.push(new n(e)):e.find("div.js_compCover").each(function(){t.push(new n(this))}),e.trigger("mouseenter")),t},JC.BaseMVC.build(n),JC.f.extendObject(n.prototype,{_beforeInit:function(){},_initHanlderEvent:function(){var e=this,t=e._model,n=e._view,i=t.selector();e.on("inited",function(){}),i.on("mouseenter",function(t){var s=$(t.target);n.coverItem(i.children("."+r.COVER_COVER)),e.notification(r.COVERED,[s,e])}),i.on("mouseleave",function(t){var s=$(t.target);n.coverBack(i.children("."+r.COVER_COVER)),e.notification(r.LEAVED,[s,e])}),i.on("click",function(t){var s=$(t.target);n.link(i.children("."+r.COVER_COVER)),e.notification(r.CLICKED,[s,e])})},_inited:function(){this.trigger("inited")}});var r=n.Model;return r.COVER_COVER="cover-cover",r.ANIMATE_SPEED=200,r._instanceName="JCCover",r.COVERED="coverCovered",r.CLICKED="coverClicked",r.LEAVED="coverLeaved",JC.f.extendObject(r.prototype,{init:function(){},getCoverDir:function(){var e=this.attrProp("coverdir");return(e==""||e>3||e<0)&&(e=2),parseInt(e)},getCoverCnt:function(){return this.attrProp("covercnt");var e},getCoverSelectorCnt:function(){var e=this.attrProp("coverselectorcnt"),t=JC.f.parentSelector(this._selector,e);return t.length>0?t.html():""},getCoverLink:function(){return this.attrProp("coverlink")},getCoverPointer:function(){return this.boolProp("coverpointer")}}),JC.f.extendObject(n.View.prototype,{init:function(){var e=this,t=e._model,n="",i=t.getCoverLink(),s=$(t.selector()),n='<button class="{0}" style="{1}" {2}>{3}</button>',o=t.getCoverCnt()||t.getCoverSelectorCnt(),u=t.getCoverPointer()?" cursor : pointer; ":"",a={overflow:"hidden"};i=i?' linkurl="'+i+'" ':"",s.css("position")=="static"&&(a.position="relative"),s.css(a),s.append(JC.f.printf(n,r.COVER_COVER,u,i,o)),e.putCover(s,t.getCoverDir())},putCover:function(e,t){var n=e[0].offsetWidth,i=e[0].offsetHeight,s=e.find("."+r.COVER_COVER),o,u;(t&1)==0?(u=0,o=t==0?parseInt("-"+i):i):(o=0,u=t==1?n:parseInt("-"+n)),s.data({covertop:o,coverleft:u}).css({top:o+"px",left:u+"px",height:i+"px",width:n+"px"})},coverItem:function(e){e.stop(!0,!0).fadeIn(r.ANIMATE_SPEED).animate({top:"0",left:"0"},r.ANIMATE_SPEED)},coverBack:function(e){e.stop(!0,!0).animate({top:e.data("covertop")+"px",left:e.data("coverleft")+"px"},r.ANIMATE_SPEED).fadeOut(r.ANIMATE_SPEED)},link:function(e){var t=e.attr("linkurl");typeof t!="undefined"&&window.open(t)}}),e.ready(function(){$(document).delegate(".js_compCover","mouseenter",function(e){var t=$(e.target),r=t.hasClass("js_compCover")?t:t.parent(".js_compCover");JC.BaseMVC.getInstance(r,n)||n.init(r)})}),JC.Cover})})(typeof define=="function"&&define.amd?define:function(e,t,n){typeof e=="function"&&(n=e),typeof t=="function"&&(n=t),n&&n()},window);