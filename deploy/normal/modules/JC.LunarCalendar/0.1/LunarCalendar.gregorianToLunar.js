(function(e,t){e("JC.LunarCalendar.gregorianToLunar",["JC.LunarCalendar.default"],function(){function e(e){var s={shengxiao:"",ganzhi:"",yue:"",ri:"",shi:"",year:"",month:"",day:"",hour:""},u=JC.LunarCalendar.toLunarDate(e);s.year=u.y,s.month=u.m+1,s.day=u.d,s.shengxiao=r.charAt((s.year-4)%12),s.ganzhi=t.charAt((s.year-4)%10)+n.charAt((s.year-4)%12),u.isleep?s.yue="闰"+i.charAt(s.month-1):s.yue=i.charAt(s.month-1),s.yue+="月",s.ri=s.day<11?"初":s.day<20?"十":s.day<30?"廿":"卅";if(s.day%10!=0||s.day==10)s.ri+=o.charAt((s.day-1)%10);return s.ri=="廿"&&(s.ri="二十"),s.ri=="卅"&&(s.ri="三十"),s.shi=n.charAt((s.hour-1)%12),s}function f(e){function t(e){for(var t=348,r=32768;r>8;r>>=1)t+=i[e-1900]&r?1:0;return t+(n(e)?(i[e-1899]&15)==15?30:29:0)}function n(e){return e=i[e-1900]&15,e==15?0:e}function r(e){if(!e||!e.getFullYear)return!1;var t=e.getFullYear(),n=e.getMonth(),e=e.getDate();return Date.UTC(t,n,e)>Date.UTC(2101,0,28)||Date.UTC(t,n,e)<Date.UTC(1900,0,31)?!0:!1}e=e||window;var i=[19416,19168,42352,21717,53856,55632,21844,22191,39632,21970,19168,42422,42192,53840,53845,46415,54944,44450,38320,18807,18815,42160,46261,27216,27968,43860,11119,38256,21234,18800,25958,54432,59984,27285,23263,11104,34531,37615,51415,51551,54432,55462,46431,22176,42420,9695,37584,53938,43344,46423,27808,46416,21333,19887,42416,17779,21183,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,38310,38335,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,20854,21183,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,53430,53855,54560,56645,46496,22224,21938,18864,42359,42160,43600,45653,27951,44448,19299,37759,18936,18800,25776,26790,59999,27424,42692,43759,37600,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,19285,19311,42352,21732,53856,59752,54560,55968,27302,22239,19168,43476,42192,53584,62034,54560],s="零,一,二,三,四,五,六,七,八,九,十".split(","),o=["初","十","廿","卅","□"],u="甲,乙,丙,丁,戊,己,庚,辛,壬,癸".split(","),a="子,丑,寅,卯,辰,巳,午,未,申,酉,戌,亥".split(","),f="鼠,牛,虎,兔,龙,蛇,马,羊,猴,鸡,狗,猪".split(","),l="小寒,大寒,立春,雨水,惊蛰,春分,清明,谷雨,立夏,小满,芒种,夏至,小暑,大暑,立秋,处暑,白露,秋分,寒露,霜降,立冬,小雪,大雪,冬至".split(","),c=[0,21208,42467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758],h=e||new Date,p=h;e.toLunarDate=function(e){e=e||h;if(r(e))return"the function[toLunarDate()]range[1900/0/31-2101/0/28]";for(var u=e.getFullYear(),a=e.getMonth(),e=e.getDate(),u=(Date.UTC(u,a,e)-Date.UTC(1900,0,31))/864e5,f,a=1900;a<2100&&u>0;a++)f=t(a),u-=f;u<0&&(u+=f,a--);var l=a,c,p,d=!1,v=n(l);for(a=1;a<13&&u>0;a++)v>0&&a==v+1&&d==0?(a--,d=!0,f=n(l)?(i[l-1899]&15)==15?30:29:0):f=i[l-1900]&65536>>a?30:29,d==1&&a==v+1&&(d=!1),u-=f;return u==0&&v>0&&a==v+1&&(d?d=!1:(d=!0,a--)),u<0&&(u+=f,a--),c=a-1,p=u+1,{y:l,m:c,d:p,leap:v,isleep:d,toString:function(){var e=d?"(闰)":"",t=s[parseInt(l/1e3)]+s[parseInt(l%1e3/100)]+s[parseInt(l%100/10)]+s[parseInt(l%10)],n=parseInt((c+1)/10)==0?"":o[1];n+=s[parseInt((c+1)%10)];var r=o[parseInt(p/10)];return r+=parseInt(p%10)==0?"":s[parseInt(p%10)],""+t+"年"+n+"月"+e+r+"日"}}},e.toSolar=function(){if(arguments.length==0)return h;var e,n,r;arguments[0]&&(e=arguments[0]),n=arguments[1]?arguments[1]:0,r=arguments[2]?arguments[2]:1;for(var s=0,o=1900;o<e;o++){var u=t(o);s+=u}for(o=0;o<n;o++)u=i[e-1900]&65536>>o?30:29,s+=u;return s+=r-1,new Date(Date.UTC(1900,0,31)+s*864e5)},e.ganzhi=function(e){function t(e,t){return(new Date(31556925974.7*(e-1900)+c[t]*6e4+Date.UTC(1900,0,6,2,5))).getUTCDate()}function n(e){return u[e%10]+a[e%12]}var i=e||h;if(r(i))return"the function[ganzhi()] date'range[1900/0/31-2101/0/28]";var s=i.getFullYear(),o=i.getMonth(),e=i.getDate(),i=i.getHours(),p,d,g,y,b;d=o<2?s-1900+36-1:s-1900+36,g=(s-1900)*12+o+12,p=t(s,o*2);var w=t(s,o*2+1);p=e==p?l[o*2]:e==w?l[o*2+1]:"";var w=t(s,2),E=t(s,o*2);return o==1&&e>=w&&(d=s-1900+36),e+1>=E&&(g=(s-1900)*12+o+13),y=Date.UTC(s,o,1,0,0,0,0)/864e5+25577+e-1,b=y%10%5*12+parseInt(i/2)%12,i==23&&y++,d%=60,g%=60,y%=60,b%=60,{y:d,m:g,d:y,h:b,jie:p,animal:f[d%12],toString:function(e){var t=n(d)+n(g)+n(y)+n(b);return e?t.substring(0,e):t}}}}JC.LunarCalendar.gregorianToLunar=e;var t="甲乙丙丁戊己庚辛壬癸",n="子丑寅卯辰巳午未申酉戌亥",r="鼠牛虎兔龙蛇马羊猴鸡狗猪",i="正二三四五六七八九十冬腊",s="日一二三四五六",o="一二三四五六七八九十",u=[268949,3402,3493,133973,1386,464219,605,2349,334123,2709,2890,267946,2773,592565,1210,2651,395863,1323,2707,265877],a=[0,31,59,90,120,151,181,212,243,273,304,334];return f(JC.LunarCalendar),JC.LunarCalendar})})(typeof define=="function"&&define.amd?define:function(e,t,n){typeof e=="function"&&(n=e),typeof t=="function"&&(n=t),n&&n()},window);